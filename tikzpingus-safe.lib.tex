% Florian Sihler, 2022
% Licensed under GNU Lesser General Public License version 3
% https://opensource.org/licenses/lgpl-3.0.html
\pingu@create@extra{mask}{%
    mask/.code    	= {\pingu@set@extra{mask}{true}\pingu@color{mask}{#1}},
    mask/.default    = pingu@white!65!gray,%
    mask band/.code  = \pingu@color{mask@band}{#1},%
}{mask band=\pingu@color@body@main}

\def\pingu@draw@ea@mask{%
\pingu@block{\pingu@color@mask} [rounded corners=.8mm] ([xshift=-5mm,yshift=.75mm]\pingu@name-bill) coordinate (@ul) [rounded corners=.1mm]-- ++(3.5mm,.55mm) to[bend left=3] ++(3mm,0) -- ++(3.5mm,-.55mm) coordinate (@ur) -- ++(0,-4.25mm)[rounded corners=.8mm] coordinate (@lr)  -- ++(-3.5mm,-.45mm) to[bend left=3] ++(-3mm,0) [rounded corners=.1mm] -- ++(-3.5mm,.45mm) coordinate (@ll) -- cycle;
\scope
\clip[use path=\pingu@upperpingu];
\pingu@draw[thick]{\pingu@color@mask@band} ([yshift=-.1mm,xshift=.2mm]@ul) to[bend right=1] ([yshift=-.9mm]\pingu@name-wings-side-right);
\pingu@draw[thick]{\pingu@color@mask@band} ([yshift=-.1mm,xshift=-.2mm]@ur) to[bend left=1]  ([yshift=-.9mm]\pingu@name-wings-side-left);
\endscope\scope
\clip[use path=\pingu@lowerpingu];
\pingu@draw[thick]{\pingu@color@mask@band} ([yshift=.1mm,xshift=.2mm]@ll) to[bend left=1]  ([yshift=.15]\pingu@name-wing-right-start);
\pingu@draw[thick]{\pingu@color@mask@band} ([yshift=.1mm,xshift=-.2mm]@lr) to[bend right=1] ([yshift=.15]\pingu@name-wing-left-start);
\endscope
% TODO: fix this sloppy overwrite
\pingu@block{\pingu@color@mask} [rounded corners=.8mm] ([xshift=-5mm,yshift=.75mm]\pingu@name-bill) coordinate (@ul) [rounded corners=.1mm]-- ++(3.5mm,.55mm) to[bend left=3] ++(3mm,0) -- ++(3.5mm,-.55mm) coordinate (@ur) -- ++(0,-4.25mm)[rounded corners=.8mm] coordinate (@lr)  -- ++(-3.5mm,-.45mm) to[bend left=3] ++(-3mm,0) [rounded corners=.1mm] -- ++(-3.5mm,.45mm) coordinate (@ll) -- cycle;
\foreach \i/\b in {0mm/,.8mm/very thin,1.6mm/very thin} {
\pingu@draw[\b]{\pingu@color@mask@band} [rounded corners=.8mm] ([xshift=-5mm,yshift=.75mm-\i]\pingu@name-bill) [rounded corners=.1mm]-- ++(3.5mm,.55mm) to[bend left=3] ++(3mm,0) -- ++(3.5mm,-.55mm) -- ++(0,-4.25mm+2*\i)[rounded corners=.8mm]  -- ++(-3.5mm,-.45mm) to[bend left=3] ++(-3mm,0) [rounded corners=.1mm] -- ++(-3.5mm,.45mm) -- cycle;
}
\pingu@draw[very thin]{\pingu@color@mask@band} ([xshift=-5mm,yshift=.75mm-4.25mm/2]\pingu@name-bill) to[bend right=1] ++(10mm,0);
}